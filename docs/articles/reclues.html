<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to reclues • reclues</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to reclues">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reclues</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/reclues.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to reclues</h1>
            
      
      
      <div class="hidden name"><code>reclues.Rmd</code></div>

    </div>

    
    
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb1-2" title="2">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"sciencificity/reclues"</span>)</a></code></pre></div>
</div>
<div id="learn-new-skills-while-solving-a-mystery" class="section level2">
<h2 class="hasAnchor">
<a href="#learn-new-skills-while-solving-a-mystery" class="anchor"></a>Learn new skills while solving a mystery</h2>
<p>The <strong><code>reclues</code></strong> package mimics the SQL Murder Mystery done by <a href="https://github.com/NUKnightLab/sql-mysteries">Northwestern’s Knight Lab</a> - their game is set up to use <code>SQL</code> to solve the mystery, <strong><code>reclues</code></strong> makes their data available in <strong><code>R</code></strong> to solve the mystery using <strong><code>R</code></strong> ;-).</p>
<p>A brief of the task at hand is given in their <a href="http://mystery.knightlab.com/walkthrough.html">walkthrough</a>. Want to play the SQL version of the game online? <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">Here it is</a> courtesy of Simon Willison!</p>
</div>
<div id="getting-started-the-prompt-knightlab" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started-the-prompt-knightlab" class="anchor"></a>Getting Started: The Prompt (<span class="citation">@knightlab</span>)</h2>
<div id="whodunnit" class="section level3">
<h3 class="hasAnchor">
<a href="#whodunnit" class="anchor"></a>Whodunnit??</h3>
<p>A crime has taken place and the detective needs your help. The detective gave you the crime scene report, but you somehow lost it. You vaguely remember that the crime was a murder that occurred sometime on <strong>Jan.15, 2018</strong> and that it took place in <strong>SQL City</strong>. All the clues to this mystery are buried in a huge database (DB), and you need to use your R skills to navigate through this vast network of information. Your first step to solving the mystery is to retrieve the corresponding crime scene report from the police department’s database.</p>
<p>Take a look at the <code>cheatsheet</code> (the <code>Readme</code> file or this <code>Vignette</code>) to learn some tips on how to do this using the tidyverse tools! From there, you can use your R skills to find the murderer. The crime may be solved with other tools besides tidy tools, please feel free to use the datasets as a learning tool for other packages in R or base R itself if that is your wish.</p>
<p>The data is available as <strong>individual dataframes</strong>:</p>
<ul>
<li>crime_scene_report</li>
<li>drivers_license</li>
<li>facebook_event_checkin</li>
<li>get_fit_now_check_in</li>
<li>get_fit_now_member</li>
<li>income</li>
<li>interview</li>
<li>person</li>
</ul>
<p>OR as the <strong>full SQLite database</strong>.</p>
<p>The cheatsheet is for tidyverse tools for now as a start, but since I am learning myself I may expand this to include data.table etc. in future. Have fun!</p>
</div>
</div>
<div id="the-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#the-datasets" class="anchor"></a>The datasets</h2>
<p>These 8 datasets will be available as soon as you install the package. Here is a brief description of what each dataset contains. Use ? combined with the dataset name to get the help page for the dataset (e.g. ?crime_scene_report).</p>
<table class="table">
<colgroup>
<col width="40%">
<col width="30%">
<col width="30%">
</colgroup>
<thead><tr class="header">
<th align="center">Table Name</th>
<th align="left">Fields</th>
<th align="right">Rows</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center"><em>crime_scene_report</em></td>
<td align="left">date, type, description, city</td>
<td align="right">1,228 rows</td>
</tr>
<tr class="even">
<td align="center"><em>drivers_license</em></td>
<td align="left">id, age, height, eye_color, hair_color, gender, plate_number, car_make, car_model</td>
<td align="right">10,007 rows</td>
</tr>
<tr class="odd">
<td align="center"><em>facebook_event_checkin</em></td>
<td align="left">person_id, event_id, event_name, date</td>
<td align="right">20,011 rows</td>
</tr>
<tr class="even">
<td align="center"><em>get_fit_now_check_in</em></td>
<td align="left">membership_id, check_in_date, check_in_time, check_out_time</td>
<td align="right">2,703 rows</td>
</tr>
<tr class="odd">
<td align="center"><em>get_fit_now_member</em></td>
<td align="left">id, person_id, name, membership_start_date, membership_status</td>
<td align="right">184 rows</td>
</tr>
<tr class="even">
<td align="center"><em>income</em></td>
<td align="left">ssn, annual_income</td>
<td align="right">7,514 rows</td>
</tr>
<tr class="odd">
<td align="center"><em>interview</em></td>
<td align="left">person_id, transcript</td>
<td align="right">4,991 rows</td>
</tr>
<tr class="even">
<td align="center"><em>person</em></td>
<td align="left">id, name, license_id, address_number, address_street_name, ssn</td>
<td align="right">10,011 rows</td>
</tr>
</tbody>
</table>
</div>
<div id="sqlite-db" class="section level2">
<h2 class="hasAnchor">
<a href="#sqlite-db" class="anchor"></a>SQLite DB</h2>
<p>The raw SQLite database as per <span class="citation">@knightlab</span> is also available through the <code><a href="../reference/get_db.html">get_db()</a></code> function. To use the SQLite DB for your investigation you will need the DBI package.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"DBI"</span>)</a></code></pre></div>
<hr>
</div>
<div id="some-useful-functions-to-view-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#some-useful-functions-to-view-the-data" class="anchor"></a>Some useful functions to view the data</h2>
<div id="if-you-are-using-the-dataframes-crime_scene_report-person-etc-" class="section level3">
<h3 class="hasAnchor">
<a href="#if-you-are-using-the-dataframes-crime_scene_report-person-etc-" class="anchor"></a>If you are using the dataframes <code>crime_scene_report</code>, <code>person</code> etc.</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(reclues)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co"># see the first 6 observations</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(crime_scene_report)</a>
<a class="sourceLine" id="cb3-5" title="5"><span class="co">#&gt; # A tibble: 6 x 4</span></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt;       date type    description                                      city   </span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;                                            &lt;chr&gt;  </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt; 1 20180115 robbery A Man Dressed as Spider-Man Is on a Robbery Spr~ NYC    </span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt; 2 20180115 murder  Life? Dont talk to me about life.                Albany </span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; 3 20180115 murder  Mama, I killed a man, put a gun against his hea~ Reno   </span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; 4 20180215 murder  REDACTED REDACTED REDACTED                       SQL Ci~</span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt; 5 20180215 murder  Someone killed the guard! He took an arrow to t~ SQL Ci~</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt; 6 20180115 theft   Big Bully stole my lunch money!                  Chicago</span></a>
<a class="sourceLine" id="cb3-14" title="14"></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="co"># pivots data with column names (features) running down the page,</span></a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co"># and a few of the values of the data listed for each feature.</span></a>
<a class="sourceLine" id="cb3-17" title="17">tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/glimpse.html">glimpse</a></span>(drivers_license)</a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co">#&gt; Observations: 10,007</span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="co">#&gt; Variables: 9</span></a>
<a class="sourceLine" id="cb3-20" title="20"><span class="co">#&gt; $ id           &lt;int&gt; 100280, 100460, 101029, 101198, 101255, 101494, 1...</span></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="co">#&gt; $ age          &lt;int&gt; 72, 63, 62, 43, 18, 48, 53, 57, 40, 81, 87, 78, 5...</span></a>
<a class="sourceLine" id="cb3-22" title="22"><span class="co">#&gt; $ height       &lt;int&gt; 57, 72, 74, 54, 79, 55, 78, 70, 65, 58, 67, 81, 5...</span></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="co">#&gt; $ eye_color    &lt;chr&gt; "brown", "brown", "green", "amber", "blue", "blue...</span></a>
<a class="sourceLine" id="cb3-24" title="24"><span class="co">#&gt; $ hair_color   &lt;chr&gt; "red", "brown", "green", "brown", "grey", "red", ...</span></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="co">#&gt; $ gender       &lt;chr&gt; "male", "female", "female", "female", "female", "...</span></a>
<a class="sourceLine" id="cb3-26" title="26"><span class="co">#&gt; $ plate_number &lt;chr&gt; "P24L4U", "XF02T6", "VKY5KR", "Y5NZ08", "5162Z1",...</span></a>
<a class="sourceLine" id="cb3-27" title="27"><span class="co">#&gt; $ car_make     &lt;chr&gt; "Acura", "Cadillac", "Scion", "Nissan", "Lexus", ...</span></a>
<a class="sourceLine" id="cb3-28" title="28"><span class="co">#&gt; $ car_model    &lt;chr&gt; "MDX", "SRX", "xB", "Rogue", "GS", "Sportage", "9...</span></a>
<a class="sourceLine" id="cb3-29" title="29"></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="co"># Another nifty function is skimr::skim(dataset_name), the %&gt;% is called a pipe</span></a>
<a class="sourceLine" id="cb3-31" title="31"><span class="co"># and comes from the magrittr package. It essentially says take the dataset `get_fit_now_member`</span></a>
<a class="sourceLine" id="cb3-32" title="32"><span class="co"># and sends it to the skimr::skim() function as the first input.</span></a>
<a class="sourceLine" id="cb3-33" title="33"><span class="co"># Note how it tells you the number of "categories" in character data types - this can help understand</span></a>
<a class="sourceLine" id="cb3-34" title="34"><span class="co"># which of your variables are categories vs free text strings - here membership_status </span></a>
<a class="sourceLine" id="cb3-35" title="35"><span class="co"># looks like a category, while id and name look like free text.</span></a>
<a class="sourceLine" id="cb3-36" title="36">get_fit_now_member <span class="op">%&gt;%</span><span class="st"> </span>skimr<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/skimr/man/skim.html">skim</a></span>()</a>
<a class="sourceLine" id="cb3-37" title="37"><span class="co">#&gt; Skim summary statistics</span></a>
<a class="sourceLine" id="cb3-38" title="38"><span class="co">#&gt;  n obs: 184 </span></a>
<a class="sourceLine" id="cb3-39" title="39"><span class="co">#&gt;  n variables: 5 </span></a>
<a class="sourceLine" id="cb3-40" title="40"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-41" title="41"><span class="co">#&gt; -- Variable type:character ---------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb3-42" title="42"><span class="co">#&gt;           variable missing complete   n min max empty n_unique</span></a>
<a class="sourceLine" id="cb3-43" title="43"><span class="co">#&gt;                 id       0      184 184   5   5     0      184</span></a>
<a class="sourceLine" id="cb3-44" title="44"><span class="co">#&gt;  membership_status       0      184 184   4   7     0        3</span></a>
<a class="sourceLine" id="cb3-45" title="45"><span class="co">#&gt;               name       0      184 184   9  20     0      184</span></a>
<a class="sourceLine" id="cb3-46" title="46"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-47" title="47"><span class="co">#&gt; -- Variable type:integer -----------------------------------------------------------------</span></a>
<a class="sourceLine" id="cb3-48" title="48"><span class="co">#&gt;               variable missing complete   n     mean       sd    p0</span></a>
<a class="sourceLine" id="cb3-49" title="49"><span class="co">#&gt;  membership_start_date       0      184 184 2e+07     4312.73 2e+07</span></a>
<a class="sourceLine" id="cb3-50" title="50"><span class="co">#&gt;              person_id       0      184 184 54898.17 27272.12 10319</span></a>
<a class="sourceLine" id="cb3-51" title="51"><span class="co">#&gt;       p25     p50     p75  p100     hist</span></a>
<a class="sourceLine" id="cb3-52" title="52"><span class="co">#&gt;  2e+07    2e+07   2e+07   2e+07 &lt;U+2581&gt;&lt;U+2581&gt;&lt;U+2581&gt;&lt;U+2582&gt;&lt;U+2587&gt;&lt;U+2581&gt;&lt;U+2581&gt;&lt;U+2583&gt;</span></a>
<a class="sourceLine" id="cb3-53" title="53"><span class="co">#&gt;  31197.75 55806.5 79230.5 99602 &lt;U+2587&gt;&lt;U+2586&gt;&lt;U+2583&gt;&lt;U+2587&gt;&lt;U+2586&gt;&lt;U+2586&gt;&lt;U+2587&gt;&lt;U+2586&gt;</span></a></code></pre></div>
<div id="select" class="section level4">
<h4 class="hasAnchor">
<a href="#select" class="anchor"></a>SELECT</h4>
<p>In R dplyr’s <code>select()</code> works much the same as <code>SELECT</code> in SQL. You use it to get only specific columns you are interested in.</p>
<p>Let’s say I wanted a closer look at the <code>name</code> and <code>license_id</code> of a person.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Let's have a look at a few columns of interest from the drivers_license table</span></a>
<a class="sourceLine" id="cb4-2" title="2">person <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(name, license_id) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="co"># formattable func from the formattable package just prints a nice table in the Readme</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
name
</th>
<th style="text-align:right;">
license_id
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
Christoper Peteuil
</td>
<td style="text-align:right;">
993845
</td>
</tr>
<tr>
<td style="text-align:right;">
Kourtney Calderwood
</td>
<td style="text-align:right;">
861794
</td>
</tr>
<tr>
<td style="text-align:right;">
Muoi Cary
</td>
<td style="text-align:right;">
385336
</td>
</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p>SELECT name, license_id<br>
FROM person<br>
LIMIT 3</p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="../man/figures/select1.PNG" width="400px"></p>
</div>
<div id="select-helpers-in-dplyr" class="section level4">
<h4 class="hasAnchor">
<a href="#select-helpers-in-dplyr" class="anchor"></a>SELECT Helpers in <code>dplyr</code>
</h4>
<p>Or maybe I want the <code>car</code> related columns from the drivers_license table? <code>dplyr</code> has some handy helper functions that can assist us! By the way, I don’t know of a SQL function that can give us this - if you do please drop me a line!</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># There are also helper functions to select columns of interest</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co"># starts_with('start_text') will help select columns that begin with start_text</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co"># ends_with('end_text') will help select columns that end with end_text</span></a>
<a class="sourceLine" id="cb5-4" title="4">drivers_license <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">  </span><span class="co"># Maybe I am only interested in the columns describing the car...</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(<span class="kw">starts_with</span>(<span class="st">'car'</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="st">  </span><span class="co"># formattable just prints a nice table in the Readme</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
car_make
</th>
<th style="text-align:right;">
car_model
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
Acura
</td>
<td style="text-align:right;">
MDX
</td>
</tr>
<tr>
<td style="text-align:right;">
Cadillac
</td>
<td style="text-align:right;">
SRX
</td>
</tr>
<tr>
<td style="text-align:right;">
Scion
</td>
<td style="text-align:right;">
xB
</td>
</tr>
</tbody>
</table>
</div>
<div id="limit" class="section level4">
<h4 class="hasAnchor">
<a href="#limit" class="anchor"></a>LIMIT</h4>
<p>Let’s say we wanted to see a part of the data - the head() function returns 6 observations and performs a similar functionality as the <code>LIMIT</code> keyword in SQL.</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> gives you the first 6 observations of the data in the “table”</li>
<li>
<code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> gives you the last 6 observations of the data in the “table”</li>
</ul>
<p>You can also specify a number as an argument to the <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> or <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> functions. For example, <code><a href="https://rdrr.io/r/utils/head.html">head(15)</a></code> and <code><a href="https://rdrr.io/r/utils/head.html">tail(10)</a></code> will give you the first 15, and last 10 observations respectively.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">crime_scene_report <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span>(description) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">8</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span><span class="co"># formattable func from the formattable package just prints a nice table in the Readme</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
A Man Dressed as Spider-Man Is on a Robbery Spree
</td>
</tr>
<tr>
<td style="text-align:right;">
Life? Dont talk to me about life.
</td>
</tr>
<tr>
<td style="text-align:right;">
Mama, I killed a man, put a gun against his head…
</td>
</tr>
<tr>
<td style="text-align:right;">
REDACTED REDACTED REDACTED
</td>
</tr>
<tr>
<td style="text-align:right;">
Someone killed the guard! He took an arrow to the knee!
</td>
</tr>
<tr>
<td style="text-align:right;">
Big Bully stole my lunch money!
</td>
</tr>
<tr>
<td style="text-align:right;">
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
</td>
</tr>
<tr>
<td style="text-align:right;">
A lone hunter stalks the night, firing arrows into the Darkness. There is no hiding, no escape. In the distance, the beast falters, tethered to the void. The killing blow comes without hesitation, without mercy.
</td>
</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p><code>SELECT description FROM crime_scene_report LIMIT 8</code></p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="../man/figures/limit.PNG" width="900px"></p>
<p>Maybe I am interested in having a look at all variables associated with a person but I just want to have a look at the data not bring back all 10,011 rows.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">person <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">4</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:right;">
name
</th>
<th style="text-align:right;">
license_id
</th>
<th style="text-align:right;">
address_number
</th>
<th style="text-align:right;">
address_street_name
</th>
<th style="text-align:right;">
ssn
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
10000
</td>
<td style="text-align:right;">
Christoper Peteuil
</td>
<td style="text-align:right;">
993845
</td>
<td style="text-align:right;">
624
</td>
<td style="text-align:right;">
Bankhall Ave
</td>
<td style="text-align:right;">
747714076
</td>
</tr>
<tr>
<td style="text-align:right;">
10007
</td>
<td style="text-align:right;">
Kourtney Calderwood
</td>
<td style="text-align:right;">
861794
</td>
<td style="text-align:right;">
2791
</td>
<td style="text-align:right;">
Gustavus Blvd
</td>
<td style="text-align:right;">
477972044
</td>
</tr>
<tr>
<td style="text-align:right;">
10010
</td>
<td style="text-align:right;">
Muoi Cary
</td>
<td style="text-align:right;">
385336
</td>
<td style="text-align:right;">
741
</td>
<td style="text-align:right;">
Northwestern Dr
</td>
<td style="text-align:right;">
828638512
</td>
</tr>
<tr>
<td style="text-align:right;">
10016
</td>
<td style="text-align:right;">
Era Moselle
</td>
<td style="text-align:right;">
431897
</td>
<td style="text-align:right;">
1987
</td>
<td style="text-align:right;">
Wood Glade St
</td>
<td style="text-align:right;">
614621061
</td>
</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p><code>SELECT * FROM person LIMIT 4;</code></p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="../man/figures/limit2.PNG" width="800px"></p>
</div>
<div id="distinct" class="section level4">
<h4 class="hasAnchor">
<a href="#distinct" class="anchor"></a>DISTINCT</h4>
<p>Let’s say we wanted to see the different kinds of membership statuses.<br>
The <code>membership_status</code> field in the Get Fit Now Membership table seems to contain this info. We will use the <code>distinct</code> function from <code>dplyr</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(magrittr)</a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co"># T he magrittr package contains the pipe %&gt;% function. Take the Get Fit Now membership data AND THEN</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co"># give me the distinct values for the `membership_status` variable.</span></a>
<a class="sourceLine" id="cb8-5" title="5">get_fit_now_member <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/distinct.html">distinct</a></span>(membership_status) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="st">    </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
membership_status
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
gold
</td>
</tr>
<tr>
<td style="text-align:right;">
regular
</td>
</tr>
<tr>
<td style="text-align:right;">
silver
</td>
</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p><code>SELECT DISTINCT(membership_status) FROM get_fit_now_member</code></p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="../man/figures/dis3.PNG" width="500px"></p>
</div>
<div id="count-distinct" class="section level4">
<h4 class="hasAnchor">
<a href="#count-distinct" class="anchor"></a>COUNT DISTINCT</h4>
<p>Let’s say we were wondering which city has the highest number of crimes - here we want the city and a count of the times that city is mentioned in the crime scene report …</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">crime_scene_report <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tally.html">count</a></span>(city) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw">desc</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">    </span><span class="co"># filter to limit the print-out</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(n <span class="op">&gt;=</span><span class="st"> </span><span class="dv">7</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">    </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
city
</th>
<th style="text-align:right;">
n
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
Murfreesboro
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
SQL City
</td>
<td style="text-align:right;">
9
</td>
</tr>
<tr>
<td style="text-align:right;">
Duluth
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
Evansville
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
Jersey City
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
Toledo
</td>
<td style="text-align:right;">
8
</td>
</tr>
<tr>
<td style="text-align:right;">
Dallas
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
Hollywood
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
Kissimmee
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
Lancaster
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
Little Rock
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
Newark
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
Portsmouth
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
Reno
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
Waterbury
</td>
<td style="text-align:right;">
7
</td>
</tr>
<tr>
<td style="text-align:right;">
Wilmington
</td>
<td style="text-align:right;">
7
</td>
</tr>
</tbody>
</table>
<p>Hhmmm looks like SQL City is quite notorious for crime!</p>
<p>SQL Equivalent is:</p>
<blockquote>
<p>SELECT city, count(city) AS n<br>
FROM crime_scene_report<br>
GROUP BY city<br>
ORDER BY n DESC</p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="../man/figures/dis2.PNG" width="500px"></p>
</div>
<div id="magnify-long-pieces-of-text" class="section level4">
<h4 class="hasAnchor">
<a href="#magnify-long-pieces-of-text" class="anchor"></a>Magnify long pieces of text</h4>
<p>Sometimes there are fields like <code>crime_scene_report.description</code> which are hard to see because the text runs over several lines. Even using View() or printing just the description to the screen sometimes does not help.</p>
<p>Enter <code>pull()</code> from the <strong>dplyr</strong> package which extracts a column from the data.</p>
<p>Hint: You will need something like this to read some of the textual description and transcript information.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">crime_scene_report <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">8</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(description) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">  </span><span class="co"># these next 2 lines are just for displaying the result nicely in the Readme</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/enframe.html">enframe</a></span>(<span class="dt">name =</span> <span class="ot">NULL</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
value
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
A Man Dressed as Spider-Man Is on a Robbery Spree
</td>
</tr>
<tr>
<td style="text-align:right;">
Life? Dont talk to me about life.
</td>
</tr>
<tr>
<td style="text-align:right;">
Mama, I killed a man, put a gun against his head…
</td>
</tr>
<tr>
<td style="text-align:right;">
REDACTED REDACTED REDACTED
</td>
</tr>
<tr>
<td style="text-align:right;">
Someone killed the guard! He took an arrow to the knee!
</td>
</tr>
<tr>
<td style="text-align:right;">
Big Bully stole my lunch money!
</td>
</tr>
<tr>
<td style="text-align:right;">
Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
</td>
</tr>
<tr>
<td style="text-align:right;">
A lone hunter stalks the night, firing arrows into the Darkness. There is no hiding, no escape. In the distance, the beast falters, tethered to the void. The killing blow comes without hesitation, without mercy.
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">interview <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span>(transcript) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">230</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(transcript) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span><span class="co"># these next 2 lines are just for displaying the result nicely in the Readme</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/enframe.html">enframe</a></span>(<span class="dt">name =</span> <span class="ot">NULL</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
value
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:right;">
I was hired by a woman with a lot of money. I don’t know her name but I know she’s around 5’5" (65“) or 5’7” (67"). She has red hair and she drives a Tesla Model S. I know that she attended the SQL Symphony Concert 3 times in December 2017.
</td>
</tr></tbody>
</table>
</div>
<div id="like" class="section level4">
<h4 class="hasAnchor">
<a href="#like" class="anchor"></a>LIKE</h4>
<p>Let’s say we’re interested in finding the people that start with a <strong>Z</strong>. We will use the <code>stringr</code> package for this. The <code>str_detect()</code> function can be used in conjunction with regular expressions - here we looking for names that start with <strong><code>(^)</code></strong> <strong>Z</strong>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(stringr)</a>
<a class="sourceLine" id="cb12-2" title="2">person <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(name, <span class="st">"^Z"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="st">  </span><span class="co"># Limit to top 5 for the print-out</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:right;">
name
</th>
<th style="text-align:right;">
license_id
</th>
<th style="text-align:right;">
address_number
</th>
<th style="text-align:right;">
address_street_name
</th>
<th style="text-align:right;">
ssn
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
10452
</td>
<td style="text-align:right;">
Zachary Angeloro
</td>
<td style="text-align:right;">
702210
</td>
<td style="text-align:right;">
3713
</td>
<td style="text-align:right;">
Currant Ave
</td>
<td style="text-align:right;">
965949567
</td>
</tr>
<tr>
<td style="text-align:right;">
10797
</td>
<td style="text-align:right;">
Zack Pentecost
</td>
<td style="text-align:right;">
150590
</td>
<td style="text-align:right;">
1839
</td>
<td style="text-align:right;">
Rushwood St
</td>
<td style="text-align:right;">
532875652
</td>
</tr>
<tr>
<td style="text-align:right;">
11264
</td>
<td style="text-align:right;">
Zada Laban
</td>
<td style="text-align:right;">
808317
</td>
<td style="text-align:right;">
1663
</td>
<td style="text-align:right;">
Testa Circle
</td>
<td style="text-align:right;">
983015244
</td>
</tr>
<tr>
<td style="text-align:right;">
14182
</td>
<td style="text-align:right;">
Zack Karwoski
</td>
<td style="text-align:right;">
964918
</td>
<td style="text-align:right;">
1546
</td>
<td style="text-align:right;">
W Middleton Way
</td>
<td style="text-align:right;">
482427372
</td>
</tr>
<tr>
<td style="text-align:right;">
14930
</td>
<td style="text-align:right;">
Zella Pietrzyk
</td>
<td style="text-align:right;">
440964
</td>
<td style="text-align:right;">
3680
</td>
<td style="text-align:right;">
Sandgate Circle
</td>
<td style="text-align:right;">
443068729
</td>
</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p>SELECT * FROM person<br>
WHERE name LIKE ‘Z%’</p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="../man/figures/like.PNG" width="700px"></p>
</div>
<div id="joins" class="section level4">
<h4 class="hasAnchor">
<a href="#joins" class="anchor"></a>JOINS</h4>
<p><code>dplyr</code> has joining functions such as <code>inner_join()</code>, <code>left_join()</code> etc. for joining one table to another. This mimics the <code>SQL</code> <code>INNER JOIN</code> etc.<br>
You will notice that the <code>person</code> table has a field called <code>id</code> and the <code>interview</code> table has a <code>person_id</code> field. Let’s join these tables and see what we get.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">person <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="co"># Since the two tables have diff field names for the common field</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="st">  </span><span class="co"># we have to specify the `by` argument.</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="st">  </span><span class="co"># by = c('field_name_from_left_table' = 'field_name_from_right_table')</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/join.html">inner_join</a></span>(interview, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'id'</span> =<span class="st"> 'person_id'</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="st">  </span><span class="co"># Let's say we're only interested in interviews from people who live</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="st">  </span><span class="co"># on some Drive abbreviated to 'Dr'</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="st">  </span>dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(address_street_name, <span class="st">'Dr'</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="st">  </span><span class="co"># Limit for print-out</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">
id
</th>
<th style="text-align:right;">
name
</th>
<th style="text-align:right;">
license_id
</th>
<th style="text-align:right;">
address_number
</th>
<th style="text-align:right;">
address_street_name
</th>
<th style="text-align:right;">
ssn
</th>
<th style="text-align:right;">
transcript
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">
10027
</td>
<td style="text-align:right;">
Antione Godbolt
</td>
<td style="text-align:right;">
439509
</td>
<td style="text-align:right;">
2431
</td>
<td style="text-align:right;">
Zelham Dr
</td>
<td style="text-align:right;">
491650087
</td>
<td style="text-align:right;">
nearer to watch them, and just as she came up to them she heard one of
</td>
</tr>
<tr>
<td style="text-align:right;">
10034
</td>
<td style="text-align:right;">
Kyra Buen
</td>
<td style="text-align:right;">
920494
</td>
<td style="text-align:right;">
1873
</td>
<td style="text-align:right;">
Sleigh Dr
</td>
<td style="text-align:right;">
332497972
</td>
<td style="text-align:right;">
a kind of serpent, that’s all I can say.’
</td>
</tr>
<tr>
<td style="text-align:right;">
10039
</td>
<td style="text-align:right;">
Francesco Agundez
</td>
<td style="text-align:right;">
278151
</td>
<td style="text-align:right;">
736
</td>
<td style="text-align:right;">
Buswell Dr
</td>
<td style="text-align:right;">
861079251
</td>
<td style="text-align:right;">
Beau–ootiful Soo–oop!
</td>
</tr>
</tbody>
</table>
<blockquote>
<p>SELECT * FROM person<br>
INNER JOIN interview ON person.id = interview.person_id<br>
WHERE address_street_name LIKE ‘%Dr%’<br>
LIMIT 3</p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="../man/figures/join.PNG" width="900px"></p>
<hr>
</div>
</div>
</div>
<div id="some-useful-funtions-for-db-manipulation" class="section level2">
<h2 class="hasAnchor">
<a href="#some-useful-funtions-for-db-manipulation" class="anchor"></a>Some useful funtions for DB Manipulation</h2>
<div id="if-you-are-using-the-sqlite-db" class="section level3">
<h3 class="hasAnchor">
<a href="#if-you-are-using-the-sqlite-db" class="anchor"></a>If you are using the SQLite DB</h3>
<p>To work with the murder mystery SQLite database we’ll first have to make a connection to it. The <code><a href="https://rdrr.io/pkg/DBI/man/dbConnect.html">DBI::dbConnect()</a></code> is usually used to set up the connection to the database, however in this package calling the <code><a href="../reference/get_db.html">get_db()</a></code> function does the work for you.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(DBI)</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dbplyr)</a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co"># Retrieve a connection to the SQLite database embedded in this package</span></a>
<a class="sourceLine" id="cb14-5" title="5">conn &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_db.html">get_db</a></span>()</a></code></pre></div>
<p>We can list the tables of the database by using the the <code><a href="https://rdrr.io/pkg/DBI/man/dbListTables.html">DBI::dbListTables()</a></code> as below. It is basically saying “Hey, what tables are there in this database I’ve connected to?”.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># List the tables in the database</span></a>
<a class="sourceLine" id="cb15-2" title="2">DBI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DBI/man/dbListTables.html">dbListTables</a></span>(conn)</a>
<a class="sourceLine" id="cb15-3" title="3"><span class="co">#&gt; [1] "crime_scene_report"     "drivers_license"       </span></a>
<a class="sourceLine" id="cb15-4" title="4"><span class="co">#&gt; [3] "facebook_event_checkin" "get_fit_now_check_in"  </span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="co">#&gt; [5] "get_fit_now_member"     "income"                </span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="co">#&gt; [7] "interview"              "person"                </span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="co">#&gt; [9] "solution"</span></a></code></pre></div>
<p>We may connect through the connection we created to get an idea of what any one of the tables contains. Here we look at the <code>crime_scene_report</code> table. The function below says “What’s the crime_scene_report table like? Show me the first few rows, please.”</p>
<p>SQL Equivalent is:</p>
<blockquote>
<p><code>SELECT * FROM crime_scene_report LIMIT 10;</code></p>
</blockquote>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="co"># Let's glimpse the data in crime_scene_report table </span></a>
<a class="sourceLine" id="cb16-2" title="2">dplyr<span class="op">::</span><span class="kw"><a href="https://dplyr.tidyverse.org/reference/tbl.html">tbl</a></span>(conn, <span class="st">"crime_scene_report"</span>)</a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co">#&gt; # Source:   table&lt;crime_scene_report&gt; [?? x 4]</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co">#&gt; # Database: sqlite 3.29.0</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co">#&gt; #   [C:\Users\vebashini\AppData\Local\Temp\Rtmpi0R3pJ\temp_libpath4647c3c2f19\reclues\db\sql-murder-mystery.db]</span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="co">#&gt;        date type    description                                      city  </span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="co">#&gt;       &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;                                            &lt;chr&gt; </span></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="co">#&gt;  1 20180115 robbery A Man Dressed as Spider-Man Is on a Robbery Spr~ NYC   </span></a>
<a class="sourceLine" id="cb16-9" title="9"><span class="co">#&gt;  2 20180115 murder  Life? Dont talk to me about life.                Albany</span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="co">#&gt;  3 20180115 murder  Mama, I killed a man, put a gun against his hea~ Reno  </span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="co">#&gt;  4 20180215 murder  REDACTED REDACTED REDACTED                       SQL C~</span></a>
<a class="sourceLine" id="cb16-12" title="12"><span class="co">#&gt;  5 20180215 murder  Someone killed the guard! He took an arrow to t~ SQL C~</span></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="co">#&gt;  6 20180115 theft   Big Bully stole my lunch money!                  Chica~</span></a>
<a class="sourceLine" id="cb16-14" title="14"><span class="co">#&gt;  7 20180115 fraud   "Lorem ipsum dolor sit amet, consectetur adipis~ Seatt~</span></a>
<a class="sourceLine" id="cb16-15" title="15"><span class="co">#&gt;  8 20170712 theft   "A lone hunter stalks the night, firing arrows ~ SQL C~</span></a>
<a class="sourceLine" id="cb16-16" title="16"><span class="co">#&gt;  9 20170820 arson   "Wield the Hammer of Sol with honor, Titan, it ~ SQL C~</span></a>
<a class="sourceLine" id="cb16-17" title="17"><span class="co">#&gt; 10 20171110 robbery "The Gjallarhorn shoulder-mounted rocket system~ SQL C~</span></a>
<a class="sourceLine" id="cb16-18" title="18"><span class="co">#&gt; # ... with more rows</span></a></code></pre></div>
<p>Notice how the rows are marked as <code>??</code> in the output <code>table&lt;crime_scene_report&gt; [?? x 4]</code>. The source is a SQLite database and it just returns a taste of the data and does not bring the entire table back into R, hence it has no idea how many rows there are in the crime_scene_report table embedded in the sql-murder-mystery database.</p>
<p>In an R Markdown file you can use the connection to directly bring back data like writing a SQL Query at an SQL editor using the <code>{sql, connection = conn}</code> code block - please remove the "" around the code block if running in a markdown file.</p>
<p>“<code>{sql, connection = conn}       SELECT * FROM person LIMIT 3</code>”</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb17-1" title="1"><span class="co">-- Direct SQL on the DB through the connection</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="kw">SELECT</span> <span class="op">*</span> </a>
<a class="sourceLine" id="cb17-3" title="3"><span class="kw">FROM</span> person</a>
<a class="sourceLine" id="cb17-4" title="4"><span class="kw">LIMIT</span> <span class="dv">3</span></a></code></pre></div>
<div class="knitsql-table">
<table class="table">
<caption>3 records</caption>
<thead><tr class="header">
<th align="right">id</th>
<th align="left">name</th>
<th align="right">license_id</th>
<th align="right">address_number</th>
<th align="left">address_street_name</th>
<th align="right">ssn</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">10000</td>
<td align="left">Christoper Peteuil</td>
<td align="right">993845</td>
<td align="right">624</td>
<td align="left">Bankhall Ave</td>
<td align="right">747714076</td>
</tr>
<tr class="even">
<td align="right">10007</td>
<td align="left">Kourtney Calderwood</td>
<td align="right">861794</td>
<td align="right">2791</td>
<td align="left">Gustavus Blvd</td>
<td align="right">477972044</td>
</tr>
<tr class="odd">
<td align="right">10010</td>
<td align="left">Muoi Cary</td>
<td align="right">385336</td>
<td align="right">741</td>
<td align="left">Northwestern Dr</td>
<td align="right">828638512</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="dbplyr" class="section level3">
<h3 class="hasAnchor">
<a href="#dbplyr" class="anchor"></a>dbplyr</h3>
<div id="show_query-to-learn-sql" class="section level4">
<h4 class="hasAnchor">
<a href="#show_query-to-learn-sql" class="anchor"></a>show_query() to Learn SQL!</h4>
<p><code>dbplyr</code> helps take dplyr code and convert it into SQL queries which then get run on the database you connected to. Here we’ll have a look at a few of the commands. The <code>show_query()</code> function from dplyr allows you to see the generated SQL - this is a <em><strong>handy way to learn SQL</strong></em> as well!</p>
<p>Also check out the <a href="https://www.rdocumentation.org/packages/dbplyr/versions/1.4.2">documentation</a> and <a href="https://cran.r-project.org/web/packages/dbplyr/vignettes/dbplyr.html">vignette</a> of dbplyr to learn more.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">tbl</span>(conn, <span class="st">"crime_scene_report"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(type <span class="op">==</span><span class="st"> "murder"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-3" title="3"><span class="st">  </span><span class="kw">show_query</span>()</a>
<a class="sourceLine" id="cb18-4" title="4"><span class="co">#&gt; &lt;SQL&gt;</span></a>
<a class="sourceLine" id="cb18-5" title="5"><span class="co">#&gt; SELECT *</span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">#&gt; FROM `crime_scene_report`</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">#&gt; WHERE (`type` = 'murder')</span></a>
<a class="sourceLine" id="cb18-8" title="8"></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="kw">tbl</span>(conn, <span class="st">"drivers_license"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-10" title="10"><span class="st">  </span><span class="kw">count</span>(eye_color) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb18-11" title="11"><span class="st">  </span><span class="kw">show_query</span>()</a>
<a class="sourceLine" id="cb18-12" title="12"><span class="co">#&gt; &lt;SQL&gt;</span></a>
<a class="sourceLine" id="cb18-13" title="13"><span class="co">#&gt; SELECT `eye_color`, COUNT() AS `n`</span></a>
<a class="sourceLine" id="cb18-14" title="14"><span class="co">#&gt; FROM `drivers_license`</span></a>
<a class="sourceLine" id="cb18-15" title="15"><span class="co">#&gt; GROUP BY `eye_color`</span></a></code></pre></div>
</div>
<div id="execute-query-on-a-database---but-use-dplyr-like-coding" class="section level4">
<h4 class="hasAnchor">
<a href="#execute-query-on-a-database---but-use-dplyr-like-coding" class="anchor"></a>Execute query on a database - but use dplyr like coding!</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">tbl</span>(conn, <span class="st">"crime_scene_report"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(type <span class="op">==</span><span class="st"> "murder"</span>) </a>
<a class="sourceLine" id="cb19-3" title="3"><span class="co">#&gt; # Source:   lazy query [?? x 4]</span></a>
<a class="sourceLine" id="cb19-4" title="4"><span class="co">#&gt; # Database: sqlite 3.29.0</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="co">#&gt; #   [C:\Users\vebashini\AppData\Local\Temp\Rtmpi0R3pJ\temp_libpath4647c3c2f19\reclues\db\sql-murder-mystery.db]</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="co">#&gt;        date type  description                                   city       </span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="co">#&gt;       &lt;int&gt; &lt;chr&gt; &lt;chr&gt;                                         &lt;chr&gt;      </span></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="co">#&gt;  1 20180115 murd~ Life? Dont talk to me about life.             Albany     </span></a>
<a class="sourceLine" id="cb19-9" title="9"><span class="co">#&gt;  2 20180115 murd~ Mama, I killed a man, put a gun against his ~ Reno       </span></a>
<a class="sourceLine" id="cb19-10" title="10"><span class="co">#&gt;  3 20180215 murd~ REDACTED REDACTED REDACTED                    SQL City   </span></a>
<a class="sourceLine" id="cb19-11" title="11"><span class="co">#&gt;  4 20180215 murd~ Someone killed the guard! He took an arrow t~ SQL City   </span></a>
<a class="sourceLine" id="cb19-12" title="12"><span class="co">#&gt;  5 20170107 murd~ "‘It proves nothing of the sort!’ said Alice~ Memphis    </span></a>
<a class="sourceLine" id="cb19-13" title="13"><span class="co">#&gt;  6 20170108 murd~ "get” is the same thing as “I get what I lik~ Round Lake~</span></a>
<a class="sourceLine" id="cb19-14" title="14"><span class="co">#&gt;  7 20170108 murd~ "       HEARTHRUG,\n"                         Jacksonvil~</span></a>
<a class="sourceLine" id="cb19-15" title="15"><span class="co">#&gt;  8 20170111 murd~ "\n"                                          Springdale </span></a>
<a class="sourceLine" id="cb19-16" title="16"><span class="co">#&gt;  9 20170121 murd~ "her, to pass away the time.\n"               Murfreesbo~</span></a>
<a class="sourceLine" id="cb19-17" title="17"><span class="co">#&gt; 10 20170122 murd~ "came near her, she began, in a low, timid v~ Temecula   </span></a>
<a class="sourceLine" id="cb19-18" title="18"><span class="co">#&gt; # ... with more rows</span></a>
<a class="sourceLine" id="cb19-19" title="19"></a>
<a class="sourceLine" id="cb19-20" title="20"><span class="kw">tbl</span>(conn, <span class="st">"drivers_license"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb19-21" title="21"><span class="st">  </span><span class="kw">count</span>(eye_color) </a>
<a class="sourceLine" id="cb19-22" title="22"><span class="co">#&gt; # Source:   lazy query [?? x 2]</span></a>
<a class="sourceLine" id="cb19-23" title="23"><span class="co">#&gt; # Database: sqlite 3.29.0</span></a>
<a class="sourceLine" id="cb19-24" title="24"><span class="co">#&gt; #   [C:\Users\vebashini\AppData\Local\Temp\Rtmpi0R3pJ\temp_libpath4647c3c2f19\reclues\db\sql-murder-mystery.db]</span></a>
<a class="sourceLine" id="cb19-25" title="25"><span class="co">#&gt;   eye_color     n</span></a>
<a class="sourceLine" id="cb19-26" title="26"><span class="co">#&gt;   &lt;chr&gt;     &lt;int&gt;</span></a>
<a class="sourceLine" id="cb19-27" title="27"><span class="co">#&gt; 1 amber      1947</span></a>
<a class="sourceLine" id="cb19-28" title="28"><span class="co">#&gt; 2 black      2017</span></a>
<a class="sourceLine" id="cb19-29" title="29"><span class="co">#&gt; 3 blue       2025</span></a>
<a class="sourceLine" id="cb19-30" title="30"><span class="co">#&gt; 4 brown      2030</span></a>
<a class="sourceLine" id="cb19-31" title="31"><span class="co">#&gt; 5 green      1988</span></a></code></pre></div>
</div>
<div id="like-1" class="section level4">
<h4 class="hasAnchor">
<a href="#like-1" class="anchor"></a>Like</h4>
<p>We can use the <code>%LIKE%</code> functionality here to get data. Let’s say we’re looking for an individual named “Zelda” …</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">tbl</span>(conn, <span class="st">"person"</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(name <span class="op">%LIKE%</span><span class="st"> 'Zel%'</span>)</a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">#&gt; # Source:   lazy query [?? x 6]</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co">#&gt; # Database: sqlite 3.29.0</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="co">#&gt; #   [C:\Users\vebashini\AppData\Local\Temp\Rtmpi0R3pJ\temp_libpath4647c3c2f19\reclues\db\sql-murder-mystery.db]</span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co">#&gt;      id name          license_id address_number address_street_na~      ssn</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;              &lt;int&gt;          &lt;int&gt; &lt;chr&gt;                 &lt;int&gt;</span></a>
<a class="sourceLine" id="cb20-8" title="8"><span class="co">#&gt; 1 14930 Zella Pietrz~     440964           3680 Sandgate Circle      4.43e8</span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="co">#&gt; 2 47936 Zelda Kitten      391768           3469 E Marie Blvd         9.97e8</span></a>
<a class="sourceLine" id="cb20-10" title="10"><span class="co">#&gt; 3 61047 Zella Binegar     360327           2955 Blake Rd             2.14e8</span></a>
<a class="sourceLine" id="cb20-11" title="11"><span class="co">#&gt; 4 75261 Zelda Oney        455975           1674 Miramount Rd         1.97e8</span></a>
<a class="sourceLine" id="cb20-12" title="12"><span class="co">#&gt; 5 87530 Zelma Feery       178807           2116 Eglinton Dr          8.75e8</span></a>
<a class="sourceLine" id="cb20-13" title="13"><span class="co">#&gt; 6 93766 Zelda Ang         558785           2313 Thorncroft Way       2.91e8</span></a>
<a class="sourceLine" id="cb20-14" title="14"></a>
<a class="sourceLine" id="cb20-15" title="15"><span class="co">#&gt; &lt;SQL&gt;</span></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="co">#&gt; SELECT *</span></a>
<a class="sourceLine" id="cb20-17" title="17"><span class="co">#&gt; FROM `person`</span></a>
<a class="sourceLine" id="cb20-18" title="18"><span class="co">#&gt; WHERE (`name` LIKE 'Zel%')</span></a></code></pre></div>
<hr>
</div>
</div>
</div>
<div id="think-you-solved-it" class="section level2">
<h2 class="hasAnchor">
<a href="#think-you-solved-it" class="anchor"></a>Think you solved it</h2>
<p>Run the following commands in R once you think you’ve solved the problem. You will need the DBI package and if you’ve been using the datasets to solve the mystery and not the SQLite database (i.e. the individual dataframes of <code>person</code>, <code>drivers_license</code> etc.) then uncomment the first line to make a connection to the database, run the queries below after you’ve put in the culprit you suspect, and then disconnect from the database.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1">conn &lt;-<span class="st"> </span>reclues<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/reclues/man/get_db.html">get_db</a></span>()</a>
<a class="sourceLine" id="cb21-2" title="2"></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="co"># Replace 'Insert the name of the person you found here' with the name of the individual you found.</span></a>
<a class="sourceLine" id="cb21-4" title="4">DBI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DBI/man/dbExecute.html">dbExecute</a></span>(conn, <span class="st">"INSERT INTO solution VALUES (1, 'Insert the name of the person you found here')"</span>)</a>
<a class="sourceLine" id="cb21-5" title="5"></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="co"># Did we solve it? You'll either get a "That's not the right person." or a "Congrats,..." message.</span></a>
<a class="sourceLine" id="cb21-7" title="7">DBI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DBI/man/dbGetQuery.html">dbGetQuery</a></span>(conn, <span class="st">"SELECT value FROM solution;"</span>)</a>
<a class="sourceLine" id="cb21-8" title="8"></a>
<a class="sourceLine" id="cb21-9" title="9">DBI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DBI/man/dbDisconnect.html">dbDisconnect</a></span>(conn)</a></code></pre></div>
<hr>
</div>
<div id="resources" class="section level2">
<h2 class="hasAnchor">
<a href="#resources" class="anchor"></a>Resources</h2>
<div id="sql" class="section level3">
<h3 class="hasAnchor">
<a href="#sql" class="anchor"></a>SQL</h3>
<ul>
<li>Brandon Rohrer (<span class="citation">@_brohrer_</span>) has a curated list of resources <a href="https://end-to-end-machine-learning.teachable.com/courses/667372/lectures/11900584">here</a>
</li>
</ul>
</div>
<div id="r" class="section level3">
<h3 class="hasAnchor">
<a href="#r" class="anchor"></a>R</h3>
<ul>
<li>Hadley Wickham and Garrett Grolemund’s book <a href="https://r4ds.had.co.nz/">R for Data Science</a>
</li>
<li><a href="https://resources.rstudio.com/the-essentials-of-data-science/data-transformation">dplyr cheatsheet</a></li>
<li>
<a href="https://resources.rstudio.com/the-essentials-of-data-science/the-grammar-and-graphics-of-data-science-58-51">dplyr video</a> and another <a href="https://resources.rstudio.com/the-essentials-of-data-science/data-wrangling-with-r-and-rstudio-55-40">here</a>
</li>
<li><a href="https://stringr.tidyverse.org/articles/stringr.html">stringr</a></li>
<li><a href="https://rstudio.cloud/learn/primers">Primers</a></li>
<li><a href="https://education.rstudio.com/">RStudio Education</a></li>
<li><a href="https://university.business-science.io/p/jumpstart-with-r">Jumpstart with R</a></li>
<li><a href="https://rstudio.com/resources/cheatsheets/">Cheatsheets</a></li>
<li><a href="https://github.com/Chris-Engelhardt/data_sci_guide">Loads of other resources</a></li>
<li>For <a href="https://cran.r-project.org/web/packages/dbplyr/vignettes/dbplyr.html">DB</a> interaction via R using dbplyr.</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#installation">Installation</a></li>
      <li><a href="#learn-new-skills-while-solving-a-mystery">Learn new skills while solving a mystery</a></li>
      <li><a href="#getting-started-the-prompt-knightlab">Getting Started: The Prompt (<span class="citation">@knightlab</span>)</a></li>
      <li><a href="#the-datasets">The datasets</a></li>
      <li><a href="#sqlite-db">SQLite DB</a></li>
      <li><a href="#some-useful-functions-to-view-the-data">Some useful functions to view the data</a></li>
      <li><a href="#some-useful-funtions-for-db-manipulation">Some useful funtions for DB Manipulation</a></li>
      <li><a href="#think-you-solved-it">Think you solved it</a></li>
      <li><a href="#resources">Resources</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Vebash Naidoo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>

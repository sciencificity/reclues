<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Learn R functions by solving a murder mystery • reclues</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Learn R functions by solving a murder mystery">
<meta property="og:description" content="Northwestern University Knight Lab (@knightlab) created a SQL murder mystery to
    help beginners and experienced SQL learners to sharpen their SQL skills through solving the 
    crime that happened at SQL City. This package loads the data for you to similarly
    solve the mystery using R tools in order to learn. The README file is particular to
    the tidyverse tools that can aid in solving the mystery but please feel free to pick
    a learning path and try using that tool - perhaps you want to learn data.table, or base R, 
    try it and if you'd like consider submitting a &quot;cheatsheet&quot; for that tool!">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">reclues</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/reclues.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div id="reclues" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#reclues" class="anchor"></a>reclues</h1></div>
<div id="learn-new-skills-while-solving-a-mystery" class="section level2">
<h2 class="hasAnchor">
<a href="#learn-new-skills-while-solving-a-mystery" class="anchor"></a>Learn new skills while solving a mystery</h2>
<p><img src="./man/figures/1.PNG" width="300px"></p>
<p>The <strong><code>reclues</code></strong> package mimics the SQL Murder Mystery done by <a href="https://github.com/NUKnightLab/sql-mysteries">Northwestern’s Knight Lab</a> - their game is set up to use <code>SQL</code> to solve the mystery, <strong><code>reclues</code></strong> makes their data available in <strong><code>R</code></strong> to solve the mystery using <strong><code>R</code></strong> ;-).</p>
<p>A brief of the task at hand is given in their <a href="http://mystery.knightlab.com/walkthrough.html">walkthrough</a>. Want to play the SQL version of the game online? <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">Here it is</a> courtesy of Simon Willison!</p>
</div>
</div>
<div id="getting-started-murder-mystery-prompt-knightlab" class="section level1">
<h1 class="hasAnchor">
<a href="#getting-started-murder-mystery-prompt-knightlab" class="anchor"></a>Getting Started: Murder Mystery Prompt (@knightlab)</h1>
<div id="whodunnit" class="section level2">
<h2 class="hasAnchor">
<a href="#whodunnit" class="anchor"></a>Whodunnit??</h2>
<p>A crime has taken place and the detective needs your help. The detective gave you the crime scene report, but you somehow lost it. You vaguely remember that the crime was a murder that occurred sometime on <strong>Jan.15, 2018</strong> and that it took place in <strong>SQL City</strong>. All the clues to this mystery are buried in a huge database, and you need to use your R skills to navigate through this vast network of information. Your first step to solving the mystery is to retrieve the corresponding crime scene report from the police department’s database.</p>
<p>Take a look at the <code>cheatsheet</code> (this <code>Readme</code> file) to learn some tips on how to do this using the tidyverse tools! From there, you can use your R skills to find the murderer. The crime may be solved with other tools besides tidy tools, please feel free to use the dataset as a learning tool for other packages in R or base R itself if that is your wish. The cheatsheet is for tidyverse tools for now as a start, but since I am learning myself I may expand this to include data.table etc. in future. Have fun!</p>
<!-- badges: start -->

<p>The goal of reclues is to provide the datasets from the SQL Challenge mentioned above within R, and some <code>cheatsheet</code> tidyverse commands for getting you on your way to solving the mystery.</p>
<hr>
</div>
<div id="the-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#the-datasets" class="anchor"></a>The datasets</h2>
<p>The datasets will be available as soon as you install the package. These are the datasets available and the data contained within them.</p>
<table class="table">
<colgroup>
<col width="21%">
<col width="69%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="center">Table Name</th>
<th align="left">Fields</th>
<th align="right">Rows</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center"><em>crime_scene_report</em></td>
<td align="left">date, type, description, city</td>
<td align="right">1,228 rows</td>
</tr>
<tr class="even">
<td align="center"><em>drivers_license</em></td>
<td align="left">id, age, height, eye_color, hair_color, gender, plate_number, car_make, car_model</td>
<td align="right">10,007 rows</td>
</tr>
<tr class="odd">
<td align="center"><em>facebook_event_checkin</em></td>
<td align="left">person_id, event_id, event_name, date</td>
<td align="right">20,011 rows</td>
</tr>
<tr class="even">
<td align="center"><em>get_fit_now_check_in</em></td>
<td align="left">membership_id, check_in_date, check_in_time, check_out_time</td>
<td align="right">2,703 rows</td>
</tr>
<tr class="odd">
<td align="center"><em>get_fit_now_member</em></td>
<td align="left">id, person_id, name, membership_start_date, membership_status</td>
<td align="right">184 rows</td>
</tr>
<tr class="even">
<td align="center"><em>income</em></td>
<td align="left">ssn, annual_income</td>
<td align="right">7,514 rows</td>
</tr>
<tr class="odd">
<td align="center"><em>interview</em></td>
<td align="left">person_id, transcript</td>
<td align="right">4,991 rows</td>
</tr>
<tr class="even">
<td align="center"><em>person</em></td>
<td align="left">id, name, license_id, address_number, address_street_name, ssn</td>
<td align="right">10,011 rows</td>
</tr>
</tbody>
</table>
</div>
<div id="sqlite-db" class="section level2">
<h2 class="hasAnchor">
<a href="#sqlite-db" class="anchor"></a>SQLite DB</h2>
<p>The raw SQLite database as per @knightlab is also available through the <code><a href="reference/get_db.html">get_db()</a></code> function. To use the SQLite DB for your investigation you will need the DBI package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"DBI"</span>)</a></code></pre></div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># install.packages("devtools")</span></a>
<a class="sourceLine" id="cb2-2" title="2">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"sciencificity/reclues"</span>)</a></code></pre></div>
<hr>
</div>
<div id="some-useful-functions-to-view-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#some-useful-functions-to-view-the-data" class="anchor"></a>Some useful functions to view the data</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(reclues)</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co"># basic example code</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co"># see the first 6 observations</span></a>
<a class="sourceLine" id="cb3-5" title="5"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(crime_scene_report)</a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co">#&gt; # A tibble: 6 x 4</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">#&gt;       date type    description                                      city   </span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">#&gt;      &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;                                            &lt;chr&gt;  </span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">#&gt; 1 20180115 robbery A Man Dressed as Spider-Man Is on a Robbery Spr~ NYC    </span></a>
<a class="sourceLine" id="cb3-10" title="10"><span class="co">#&gt; 2 20180115 murder  Life? Dont talk to me about life.                Albany </span></a>
<a class="sourceLine" id="cb3-11" title="11"><span class="co">#&gt; 3 20180115 murder  Mama, I killed a man, put a gun against his hea~ Reno   </span></a>
<a class="sourceLine" id="cb3-12" title="12"><span class="co">#&gt; 4 20180215 murder  REDACTED REDACTED REDACTED                       SQL Ci~</span></a>
<a class="sourceLine" id="cb3-13" title="13"><span class="co">#&gt; 5 20180215 murder  Someone killed the guard! He took an arrow to t~ SQL Ci~</span></a>
<a class="sourceLine" id="cb3-14" title="14"><span class="co">#&gt; 6 20180115 theft   Big Bully stole my lunch money!                  Chicago</span></a>
<a class="sourceLine" id="cb3-15" title="15"><span class="kw">glimpse</span>(crime_scene_report)</a>
<a class="sourceLine" id="cb3-16" title="16"><span class="co">#&gt; Observations: 1,228</span></a>
<a class="sourceLine" id="cb3-17" title="17"><span class="co">#&gt; Variables: 4</span></a>
<a class="sourceLine" id="cb3-18" title="18"><span class="co">#&gt; $ date        &lt;int&gt; 20180115, 20180115, 20180115, 20180215, 20180215, ...</span></a>
<a class="sourceLine" id="cb3-19" title="19"><span class="co">#&gt; $ type        &lt;chr&gt; "robbery", "murder", "murder", "murder", "murder",...</span></a>
<a class="sourceLine" id="cb3-20" title="20"><span class="co">#&gt; $ description &lt;chr&gt; "A Man Dressed as Spider-Man Is on a Robbery Spree...</span></a>
<a class="sourceLine" id="cb3-21" title="21"><span class="co">#&gt; $ city        &lt;chr&gt; "NYC", "Albany", "Reno", "SQL City", "SQL City", "...</span></a>
<a class="sourceLine" id="cb3-22" title="22"></a>
<a class="sourceLine" id="cb3-23" title="23"><span class="co"># Notice that the type field contains info on the </span></a>
<a class="sourceLine" id="cb3-24" title="24"><span class="co"># type of crime which took place?</span></a>
<a class="sourceLine" id="cb3-25" title="25"><span class="co"># Want to see how many reports of each incident type we have?</span></a>
<a class="sourceLine" id="cb3-26" title="26"><span class="kw"><a href="https://rdrr.io/r/base/table.html">table</a></span>(crime_scene_report<span class="op">$</span>type)</a>
<a class="sourceLine" id="cb3-27" title="27"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-28" title="28"><span class="co">#&gt;     arson   assault blackmail   bribery     fraud    murder   robbery </span></a>
<a class="sourceLine" id="cb3-29" title="29"><span class="co">#&gt;       148       145       130       135       130       148       134 </span></a>
<a class="sourceLine" id="cb3-30" title="30"><span class="co">#&gt; smuggling     theft </span></a>
<a class="sourceLine" id="cb3-31" title="31"><span class="co">#&gt;       117       141</span></a></code></pre></div>
<p>Other great packages to explore your data are <code>DataExplorer</code> and <code>skimr</code>.</p>
<ul>
<li>
<strong>DataExplorer’s</strong><code>create_report(dataset)</code> creates an html report with summary stats, missing data, graphs of categorical data etc.</li>
<li>
<strong>skimr’s</strong> <code>skim(dataset)</code> creates a nice summary of your dataset separating the different types of data allowing you to look at summary stats by data type.</li>
</ul>
</div>
<div id="some-useful-functions-to-explore-the-data" class="section level2">
<h2 class="hasAnchor">
<a href="#some-useful-functions-to-explore-the-data" class="anchor"></a>Some useful functions to explore the data</h2>
<div id="select" class="section level3">
<h3 class="hasAnchor">
<a href="#select" class="anchor"></a>SELECT</h3>
<p>In R dplyr’s <code>select()</code> works much the same as <code>SELECT</code> in SQL. You use it to get only specific columns you are interested in.</p>
<p>Let’s say I wanted a closer look at the <code>plate_number</code>, <code>car_make</code> and <code>car_model</code> from the drivers_license table?</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Let's have a look at a few columns of interest from</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co"># the drivers_license table</span></a>
<a class="sourceLine" id="cb4-3" title="3">drivers_license <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="st">  </span><span class="kw">select</span>(plate_number, car_make, car_model) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="st">  </span><span class="co"># formattable func from the formattable package just prints a nice table in the Readme</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

plate\_number

</th>

<th style="text-align:right;">

car\_make

</th>

<th style="text-align:right;">

car\_model

</th>

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">

P24L4U

</td>

<td style="text-align:right;">

Acura

</td>

<td style="text-align:right;">

MDX

</td>

</tr>
<tr>
<td style="text-align:right;">

XF02T6

</td>

<td style="text-align:right;">

Cadillac

</td>

<td style="text-align:right;">

SRX

</td>

</tr>
<tr>
<td style="text-align:right;">

VKY5KR

</td>

<td style="text-align:right;">

Scion

</td>

<td style="text-align:right;">

xB

</td>

</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># There are also helper functions to select columns of interest</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="co"># starts_with('start_text') will help select columns that begin with start_text</span></a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co"># ends_with('end_text') will help select columns that end with end_text</span></a>
<a class="sourceLine" id="cb5-4" title="4">drivers_license <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="st">  </span><span class="co"># Maybe I am only interested in the columns describing the car...</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">'car'</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="st">  </span><span class="co"># formattable just prints a nice table in the Readme</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

car\_make

</th>

<th style="text-align:right;">

car\_model

</th>

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">

Acura

</td>

<td style="text-align:right;">

MDX

</td>

</tr>
<tr>
<td style="text-align:right;">

Cadillac

</td>

<td style="text-align:right;">

SRX

</td>

</tr>
<tr>
<td style="text-align:right;">

Scion

</td>

<td style="text-align:right;">

xB

</td>

</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p>SELECT plate_number, car_make, car_model FROM drivers_license LIMIT 3</p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="./man/figures/select.PNG" width="400px"></p>
<hr>
</div>
<div id="limit" class="section level3">
<h3 class="hasAnchor">
<a href="#limit" class="anchor"></a>LIMIT</h3>
<p>Let’s say we wanted to see a part of the data - the head() function returns 6 observations and performs a similar functionality as the <code>LIMIT</code> keyword in SQL.</p>
<ul>
<li>
<code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> gives you the first 6 observations of the data in the “table”</li>
<li>
<code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> gives you the last 6 observations of the data in the “table”</li>
</ul>
<p>You can also specify a number as an argument to the <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> or <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> functions. For example, <code><a href="https://rdrr.io/r/utils/head.html">head(15)</a></code> and <code><a href="https://rdrr.io/r/utils/head.html">tail(10)</a></code> will give you the first 15, and last 10 observations respectively.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">crime_scene_report <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw">select</span>(description) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" title="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">8</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="st">  </span><span class="co"># formattable func from the formattable package just prints a nice table in the Readme</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

description

</th>

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">

A Man Dressed as Spider-Man Is on a Robbery Spree

</td>

</tr>
<tr>
<td style="text-align:right;">

Life? Dont talk to me about life.

</td>

</tr>
<tr>
<td style="text-align:right;">

Mama, I killed a man, put a gun against his head…

</td>

</tr>
<tr>
<td style="text-align:right;">

REDACTED REDACTED REDACTED

</td>

</tr>
<tr>
<td style="text-align:right;">

Someone killed the guard\! He took an arrow to the knee\!

</td>

</tr>
<tr>
<td style="text-align:right;">

Big Bully stole my lunch money\!

</td>

</tr>
<tr>
<td style="text-align:right;">

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua.

</td>

</tr>
<tr>
<td style="text-align:right;">

A lone hunter stalks the night, firing arrows into the Darkness. There
is no hiding, no escape. In the distance, the beast falters, tethered to
the void. The killing blow comes without hesitation, without mercy.

</td>

</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p><code>SELECT description FROM crime_scene_report LIMIT 8</code></p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="./man/figures/limit.PNG" width="900px"></p>
<p>Maybe I am interested in having a look at all variables associated with a person but I just want to have a look at the data not bring back all 10,011 rows.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">person <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">4</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

id

</th>

<th style="text-align:right;">

name

</th>

<th style="text-align:right;">

license\_id

</th>

<th style="text-align:right;">

address\_number

</th>

<th style="text-align:right;">

address\_street\_name

</th>

<th style="text-align:right;">

ssn

</th>

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">

10000

</td>

<td style="text-align:right;">

Christoper Peteuil

</td>

<td style="text-align:right;">

993845

</td>

<td style="text-align:right;">

624

</td>

<td style="text-align:right;">

Bankhall Ave

</td>

<td style="text-align:right;">

747714076

</td>

</tr>
<tr>
<td style="text-align:right;">

10007

</td>

<td style="text-align:right;">

Kourtney Calderwood

</td>

<td style="text-align:right;">

861794

</td>

<td style="text-align:right;">

2791

</td>

<td style="text-align:right;">

Gustavus Blvd

</td>

<td style="text-align:right;">

477972044

</td>

</tr>
<tr>
<td style="text-align:right;">

10010

</td>

<td style="text-align:right;">

Muoi Cary

</td>

<td style="text-align:right;">

385336

</td>

<td style="text-align:right;">

741

</td>

<td style="text-align:right;">

Northwestern Dr

</td>

<td style="text-align:right;">

828638512

</td>

</tr>
<tr>
<td style="text-align:right;">

10016

</td>

<td style="text-align:right;">

Era Moselle

</td>

<td style="text-align:right;">

431897

</td>

<td style="text-align:right;">

1987

</td>

<td style="text-align:right;">

Wood Glade St

</td>

<td style="text-align:right;">

614621061

</td>

</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p><code>SELECT * FROM person LIMIT 4;</code></p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="./man/figures/limit2.PNG" width="800px"></p>
<hr>
</div>
<div id="distinct" class="section level3">
<h3 class="hasAnchor">
<a href="#distinct" class="anchor"></a>DISTINCT</h3>
<p>Let’s say we wanted to see the different <strong>types</strong> of criminal activity the reports identify ….<br>
The <code>type</code> field in the crime scene reports table seems to contain this info. We will use the <code>distinct</code> function from <code>dplyr</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(magrittr)</a>
<a class="sourceLine" id="cb8-2" title="2"></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co"># the magrittr package contains the pipe %&gt;% function</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co"># Take the crime scene report data AND THEN</span></a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co"># give me the distinct values for the `type` variable.</span></a>
<a class="sourceLine" id="cb8-6" title="6">crime_scene_report <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="st">    </span><span class="kw">distinct</span>(type) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="st">    </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

type

</th>

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">

robbery

</td>

</tr>
<tr>
<td style="text-align:right;">

murder

</td>

</tr>
<tr>
<td style="text-align:right;">

theft

</td>

</tr>
<tr>
<td style="text-align:right;">

fraud

</td>

</tr>
<tr>
<td style="text-align:right;">

arson

</td>

</tr>
<tr>
<td style="text-align:right;">

bribery

</td>

</tr>
<tr>
<td style="text-align:right;">

assault

</td>

</tr>
<tr>
<td style="text-align:right;">

smuggling

</td>

</tr>
<tr>
<td style="text-align:right;">

blackmail

</td>

</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p><code>SELECT DISTINCT(type) FROM crime_scene_report</code></p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="./man/figures/dis1.PNG" width="500px"></p>
</div>
<div id="count-distinct" class="section level3">
<h3 class="hasAnchor">
<a href="#count-distinct" class="anchor"></a>COUNT DISTINCT</h3>
<p>Let’s say we were wondering which city has the highest number of crimes</p>
<ul>
<li>here we want the city and a count of the times that city is mentioned in the crime scene report …</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">crime_scene_report <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">    </span><span class="kw">count</span>(city) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(n)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="st">    </span><span class="co"># filter to limit the print-out</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">    </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(n <span class="op">&gt;=</span><span class="st"> </span><span class="dv">7</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="st">    </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

city

</th>

<th style="text-align:right;">

n

</th>

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">

Murfreesboro

</td>

<td style="text-align:right;">

9

</td>

</tr>
<tr>
<td style="text-align:right;">

SQL City

</td>

<td style="text-align:right;">

9

</td>

</tr>
<tr>
<td style="text-align:right;">

Duluth

</td>

<td style="text-align:right;">

8

</td>

</tr>
<tr>
<td style="text-align:right;">

Evansville

</td>

<td style="text-align:right;">

8

</td>

</tr>
<tr>
<td style="text-align:right;">

Jersey City

</td>

<td style="text-align:right;">

8

</td>

</tr>
<tr>
<td style="text-align:right;">

Toledo

</td>

<td style="text-align:right;">

8

</td>

</tr>
<tr>
<td style="text-align:right;">

Dallas

</td>

<td style="text-align:right;">

7

</td>

</tr>
<tr>
<td style="text-align:right;">

Hollywood

</td>

<td style="text-align:right;">

7

</td>

</tr>
<tr>
<td style="text-align:right;">

Kissimmee

</td>

<td style="text-align:right;">

7

</td>

</tr>
<tr>
<td style="text-align:right;">

Lancaster

</td>

<td style="text-align:right;">

7

</td>

</tr>
<tr>
<td style="text-align:right;">

Little Rock

</td>

<td style="text-align:right;">

7

</td>

</tr>
<tr>
<td style="text-align:right;">

Newark

</td>

<td style="text-align:right;">

7

</td>

</tr>
<tr>
<td style="text-align:right;">

Portsmouth

</td>

<td style="text-align:right;">

7

</td>

</tr>
<tr>
<td style="text-align:right;">

Reno

</td>

<td style="text-align:right;">

7

</td>

</tr>
<tr>
<td style="text-align:right;">

Waterbury

</td>

<td style="text-align:right;">

7

</td>

</tr>
<tr>
<td style="text-align:right;">

Wilmington

</td>

<td style="text-align:right;">

7

</td>

</tr>
</tbody>
</table>
<p>Hhmmm looks like SQL City is quite notorious for crime!</p>
<p>SQL Equivalent is:</p>
<blockquote>
<p>SELECT city, count(city) AS n<br>
FROM crime_scene_report<br>
GROUP BY city<br>
ORDER BY n DESC</p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="./man/figures/dis2.PNG" width="500px"></p>
<hr>
</div>
<div id="magnify-long-pieces-of-text" class="section level3">
<h3 class="hasAnchor">
<a href="#magnify-long-pieces-of-text" class="anchor"></a>Magnify long pieces of text</h3>
<p>Sometimes there are fields like <code>crime_scene_report.description</code> which are hard to see because the text runs over several lines. Even using View() or printing just the description to the screen sometimes does not help.</p>
<p>Enter <code>pull()</code> from the <strong>dplyr</strong> package which extracts a column from the data.</p>
<p>Hint: You will need something like this to read some of the textual description and transcript information.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">crime_scene_report <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">8</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="st">  </span><span class="kw">pull</span>(description) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="st">  </span><span class="co"># these next 2 lines are just for displaying the result nicely in the Readme</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/enframe.html">enframe</a></span>(<span class="dt">name =</span> <span class="ot">NULL</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

value

</th>

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">

A Man Dressed as Spider-Man Is on a Robbery Spree

</td>

</tr>
<tr>
<td style="text-align:right;">

Life? Dont talk to me about life.

</td>

</tr>
<tr>
<td style="text-align:right;">

Mama, I killed a man, put a gun against his head…

</td>

</tr>
<tr>
<td style="text-align:right;">

REDACTED REDACTED REDACTED

</td>

</tr>
<tr>
<td style="text-align:right;">

Someone killed the guard\! He took an arrow to the knee\!

</td>

</tr>
<tr>
<td style="text-align:right;">

Big Bully stole my lunch money\!

</td>

</tr>
<tr>
<td style="text-align:right;">

Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua.

</td>

</tr>
<tr>
<td style="text-align:right;">

A lone hunter stalks the night, firing arrows into the Darkness. There
is no hiding, no escape. In the distance, the beast falters, tethered to
the void. The killing blow comes without hesitation, without mercy.

</td>

</tr>
</tbody>
</table>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">interview <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span>(transcript) <span class="op">&gt;=</span><span class="st"> </span><span class="dv">230</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-3" title="3"><span class="st">  </span><span class="kw">pull</span>(transcript) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">  </span><span class="co"># these next 2 lines are just for displaying the result nicely in the Readme</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">  </span>tibble<span class="op">::</span><span class="kw"><a href="https://tibble.tidyverse.org/reference/enframe.html">enframe</a></span>(<span class="dt">name =</span> <span class="ot">NULL</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

value

</th>

</tr></thead>
<tbody><tr>
<td style="text-align:right;">

I was hired by a woman with a lot of money. I don’t know her name but I
know she’s around 5’5" (65“) or 5’7” (67"). She has red hair and she
drives a Tesla Model S. I know that she attended the SQL Symphony
Concert 3 times in December 2017.

</td>

</tr></tbody>
</table>
<hr>
</div>
<div id="like" class="section level3">
<h3 class="hasAnchor">
<a href="#like" class="anchor"></a>LIKE</h3>
<p>Let’s say we’re interested in finding the people that start with a <strong>Z</strong>. We will use the <code>stringr</code> package for this. The <code>str_detect()</code> function can be used in conjunction with regular expressions - here we looking for names that start with <strong><code>(^)</code></strong> <strong>Z</strong>.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(stringr)</a>
<a class="sourceLine" id="cb12-2" title="2">person <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(name, <span class="st">"^Z"</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="st">  </span><span class="co"># Limit to top 5 for the print-out</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">5</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

id

</th>

<th style="text-align:right;">

name

</th>

<th style="text-align:right;">

license\_id

</th>

<th style="text-align:right;">

address\_number

</th>

<th style="text-align:right;">

address\_street\_name

</th>

<th style="text-align:right;">

ssn

</th>

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">

10452

</td>

<td style="text-align:right;">

Zachary Angeloro

</td>

<td style="text-align:right;">

702210

</td>

<td style="text-align:right;">

3713

</td>

<td style="text-align:right;">

Currant Ave

</td>

<td style="text-align:right;">

965949567

</td>

</tr>
<tr>
<td style="text-align:right;">

10797

</td>

<td style="text-align:right;">

Zack Pentecost

</td>

<td style="text-align:right;">

150590

</td>

<td style="text-align:right;">

1839

</td>

<td style="text-align:right;">

Rushwood St

</td>

<td style="text-align:right;">

532875652

</td>

</tr>
<tr>
<td style="text-align:right;">

11264

</td>

<td style="text-align:right;">

Zada Laban

</td>

<td style="text-align:right;">

808317

</td>

<td style="text-align:right;">

1663

</td>

<td style="text-align:right;">

Testa Circle

</td>

<td style="text-align:right;">

983015244

</td>

</tr>
<tr>
<td style="text-align:right;">

14182

</td>

<td style="text-align:right;">

Zack Karwoski

</td>

<td style="text-align:right;">

964918

</td>

<td style="text-align:right;">

1546

</td>

<td style="text-align:right;">

W Middleton Way

</td>

<td style="text-align:right;">

482427372

</td>

</tr>
<tr>
<td style="text-align:right;">

14930

</td>

<td style="text-align:right;">

Zella Pietrzyk

</td>

<td style="text-align:right;">

440964

</td>

<td style="text-align:right;">

3680

</td>

<td style="text-align:right;">

Sandgate Circle

</td>

<td style="text-align:right;">

443068729

</td>

</tr>
</tbody>
</table>
<p>SQL Equivalent is:</p>
<blockquote>
<p>SELECT * FROM person<br>
WHERE name LIKE ‘Z%’</p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="./man/figures/like.PNG" width="700px"></p>
<hr>
</div>
<div id="joins" class="section level3">
<h3 class="hasAnchor">
<a href="#joins" class="anchor"></a>JOINS</h3>
<p><code>dplyr</code> has joining functions such as <code>inner_join()</code>, <code>left_join()</code> etc. for joining one table to another. This mimics the <code>SQL</code> <code>INNER JOIN</code> etc.<br>
You will notice that the <code>person</code> table has a field called <code>id</code> and the <code>interview</code> table has a <code>person_id</code> field. Let’s join these tables and see what we get.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">person <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="co"># Since the two tables have diff field names for the common field</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="st">  </span><span class="co"># we have to specify the `by` argument.</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="st">  </span><span class="co"># by = c('field_name_from_left_table' = 'field_name_from_right_table')</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="st">  </span><span class="kw">inner_join</span>(interview, <span class="dt">by =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'id'</span> =<span class="st"> 'person_id'</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="st">  </span><span class="co"># Let's say we're only interested in interviews from people who live</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="st">  </span><span class="co"># on some Drive abbreviated to 'Dr'</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span>(stringr<span class="op">::</span><span class="kw"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span>(address_street_name, <span class="st">'Dr'</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="st">  </span><span class="co"># Limit for print-out</span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="st">  </span><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="dv">3</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="st">  </span>formattable<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/formattable/man/formattable.html">formattable</a></span>()</a></code></pre></div>
<table class="table table table-condensed">
<thead><tr>
<th style="text-align:right;">

id

</th>

<th style="text-align:right;">

name

</th>

<th style="text-align:right;">

license\_id

</th>

<th style="text-align:right;">

address\_number

</th>

<th style="text-align:right;">

address\_street\_name

</th>

<th style="text-align:right;">

ssn

</th>

<th style="text-align:right;">

transcript

</th>

</tr></thead>
<tbody>
<tr>
<td style="text-align:right;">

10027

</td>

<td style="text-align:right;">

Antione Godbolt

</td>

<td style="text-align:right;">

439509

</td>

<td style="text-align:right;">

2431

</td>

<td style="text-align:right;">

Zelham Dr

</td>

<td style="text-align:right;">

491650087

</td>

<td style="text-align:right;">

nearer to watch them, and just as she came up to them she heard one of

</td>

</tr>
<tr>
<td style="text-align:right;">

10034

</td>

<td style="text-align:right;">

Kyra Buen

</td>

<td style="text-align:right;">

920494

</td>

<td style="text-align:right;">

1873

</td>

<td style="text-align:right;">

Sleigh Dr

</td>

<td style="text-align:right;">

332497972

</td>

<td style="text-align:right;">

a kind of serpent, thatâs all I can say.â

</td>

</tr>
<tr>
<td style="text-align:right;">

10039

</td>

<td style="text-align:right;">

Francesco Agundez

</td>

<td style="text-align:right;">

278151

</td>

<td style="text-align:right;">

736

</td>

<td style="text-align:right;">

Buswell Dr

</td>

<td style="text-align:right;">

861079251

</td>

<td style="text-align:right;">

Beau–ootiful Soo–oop\!

</td>

</tr>
</tbody>
</table>
<blockquote>
<p>SELECT * FROM person<br>
INNER JOIN interview ON person.id = interview.person_id<br>
WHERE address_street_name LIKE ‘%Dr%’<br>
LIMIT 3</p>
</blockquote>
<p>Here’s a snippet from the <a href="https://sql-murder-mystery.datasette.io/sql-murder-mystery">online SQL version</a>:</p>
<p><img src="./man/figures/join.PNG" width="900px"></p>
<hr>
</div>
</div>
</div>
<div id="think-you-solved-it" class="section level1">
<h1 class="hasAnchor">
<a href="#think-you-solved-it" class="anchor"></a>Think you solved it?</h1>
<div id="check-via-knightlabs-solution-checker" class="section level2">
<h2 class="hasAnchor">
<a href="#check-via-knightlabs-solution-checker" class="anchor"></a>Check via @knightlab’s <code>Solution Checker</code>
</h2>
<p>Head over to <a href="http://mystery.knightlab.com/">‘The SQL Murder Mystery Page’</a> OR <a href="http://mystery.knightlab.com/walkthrough.html">‘The SQL Murder Mystery Walkthrough’</a> to check your solution! At the bottom of both pages there is a <strong><code>Check your solution</code></strong> section where you enter the name of the individual you suspect committed the crime.</p>
</div>
<div id="check-in-r" class="section level2">
<h2 class="hasAnchor">
<a href="#check-in-r" class="anchor"></a>Check in R</h2>
<p>Run the following commands in R once you think you’ve solved the problem. You will need the DBI package and if you’ve been using the datasets to solve the mystery and not the SQLite database (i.e. the individual dataframes of <code>person</code>, <code>drivers_license</code> etc.) then uncomment the first line to make a connection to the database, run the queries below after you’ve put in the culprit you suspect, and then disconnect from the database.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">conn &lt;-<span class="st"> </span>reclues<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/reclues/man/get_db.html">get_db</a></span>()</a>
<a class="sourceLine" id="cb14-2" title="2"></a>
<a class="sourceLine" id="cb14-3" title="3"><span class="co"># Replace 'Insert the name of the person you found here' with the name of the individual you found.</span></a>
<a class="sourceLine" id="cb14-4" title="4">DBI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DBI/man/dbExecute.html">dbExecute</a></span>(conn, <span class="st">"INSERT INTO solution VALUES (1, 'Insert the name of the person you found here')"</span>)</a>
<a class="sourceLine" id="cb14-5" title="5"></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="co"># Did we solve it? You'll either get a "That's not the right person." or a "Congrats,..." message.</span></a>
<a class="sourceLine" id="cb14-7" title="7">DBI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DBI/man/dbGetQuery.html">dbGetQuery</a></span>(conn, <span class="st">"SELECT value FROM solution;"</span>)</a>
<a class="sourceLine" id="cb14-8" title="8"></a>
<a class="sourceLine" id="cb14-9" title="9">DBI<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/DBI/man/dbDisconnect.html">dbDisconnect</a></span>(conn)</a></code></pre></div>
<hr>
</div>
</div>
<div id="resources-for-learning" class="section level1">
<h1 class="hasAnchor">
<a href="#resources-for-learning" class="anchor"></a>Resources for learning</h1>
<div id="sql" class="section level2">
<h2 class="hasAnchor">
<a href="#sql" class="anchor"></a>SQL</h2>
<ul>
<li>Brandon Rohrer (@_brohrer_) has a curated list of resources <a href="https://end-to-end-machine-learning.teachable.com/courses/667372/lectures/11900584">here</a>
</li>
</ul>
</div>
</div>
<div id="r" class="section level1">
<h1 class="hasAnchor">
<a href="#r" class="anchor"></a>R</h1>
<ul>
<li>Hadley Wickham and Garrett Grolemund’s book <a href="https://r4ds.had.co.nz/">R for Data Science</a>
</li>
<li><a href="https://resources.rstudio.com/the-essentials-of-data-science/data-transformation">dplyr cheatsheet</a></li>
<li>
<a href="https://resources.rstudio.com/the-essentials-of-data-science/the-grammar-and-graphics-of-data-science-58-51">dplyr video</a> and another <a href="https://resources.rstudio.com/the-essentials-of-data-science/data-wrangling-with-r-and-rstudio-55-40">here</a>
</li>
<li><a href="https://stringr.tidyverse.org/articles/stringr.html">stringr</a></li>
<li><a href="https://rstudio.cloud/learn/primers">Primers</a></li>
<li><a href="https://education.rstudio.com/">RStudio Education</a></li>
<li><a href="https://university.business-science.io/p/jumpstart-with-r">Jumpstart with R</a></li>
<li><a href="https://rstudio.com/resources/cheatsheets/">Cheatsheets</a></li>
<li><a href="https://github.com/Chris-Engelhardt/data_sci_guide">Loads of other resources</a></li>
<li>For <a href="https://cran.r-project.org/web/packages/dbplyr/vignettes/dbplyr.html">DB</a> interaction via R using dbplyr.</li>
</ul>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Vebash Naidoo <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/sciencificity/reclues"><img src="https://travis-ci.org/sciencificity/reclues.svg?branch=master" alt="Travis build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Vebash Naidoo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
